<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>.NET Standard / .NET Core support
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Type providers for SQL server access.">
    <meta name="author" content="Ross McKinlay, Colin Bull, Tuomas Hietanen">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="../content/style.css" />
    <script type="text/javascript" src="../content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/fsprojects/SQLProvider">github page</a></li>
        </ul>
        <h3 class="muted"><a href="../index.html">SQLProvider</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1><a name="NET-Standard-NET-Core-support" class="anchor" href="#NET-Standard-NET-Core-support">.NET Standard / .NET Core support</a></h1>
<p>This is very initial / experimental, from version 1.1.18.</p>
<p>Install e.g. with: <code>dotnet add package SQLProvider --version 1.1.18</code></p>
<p>You will need some configuration to your project files, see the examples.
- You need a path to fsc.
- You need your database driver and dependency dlls to resolutionPath-folder.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">Core</span> <span class="o">/</span> <span class="id">NetStandard</span><span class="pn">:</span>
                     <span class="pn">|</span> <span class="id">Win10</span> <span class="pn">|</span> <span class="id">Mac</span>  <span class="pn">|</span> <span class="id">Ubuntu</span> <span class="pn">(</span><span class="id">needs</span> <span class="id">sudo</span><span class="pn">)</span> <span class="pn">|</span> <span class="id">Comments</span>   <span class="pn">|</span> 
<span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">Microsoft</span> <span class="id">SQL</span> <span class="id">Server</span> <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>   <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>  <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>        <span class="pn">|</span> <span class="id">See</span> <span class="id">prebuild</span> <span class="id">task</span><span class="pn">.</span> <span class="pn">|</span>
<span class="id">Postgres</span>             <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>   <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>  <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>        <span class="pn">|</span> <span class="id">See</span> <span class="id">post</span><span class="o">-</span><span class="id">build</span> <span class="id">task</span><span class="pn">.</span> <span class="pn">|</span>
<span class="id">MySQL</span> <span class="o">/</span> <span class="id">MariaDB</span>      <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>   <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>  <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>        <span class="pn">|</span> <span class="id">See</span> <span class="id">post</span><span class="o">-</span><span class="id">build</span> <span class="id">task</span><span class="pn">.</span> <span class="pn">|</span>
<span class="id">SQLite</span>               <span class="pn">|</span> <span class="pn">[</span><span class="id">x</span><span class="pn">]</span>   <span class="pn">|</span>      <span class="pn">|</span>            <span class="pn">|</span> <span class="id">See</span> <span class="id">post</span><span class="o">-</span><span class="id">build</span> <span class="id">task</span><span class="pn">.</span> <span class="id">Builds</span> <span class="id">on</span> <span class="id">Win</span><span class="pn">,</span> <span class="id">runs</span> <span class="id">on</span> <span class="id">all</span> <span class="pn">|</span>
<span class="id">FireBird</span>             <span class="pn">|</span>  <span class="o">?</span>    <span class="pn">|</span>  <span class="o">?</span>   <span class="pn">|</span>  <span class="o">?</span>         <span class="pn">|</span> <span class="id">Not</span> <span class="id">tested</span><span class="pn">.</span> <span class="pn">|</span>
<span class="id">Oracle</span>               <span class="pn">|</span>       <span class="pn">|</span>      <span class="pn">|</span>            <span class="pn">|</span> <span class="id">No</span> <span class="id">ODP</span><span class="pn">.</span><span class="id">NET</span><span class="o">-</span><span class="id">driver</span> <span class="id">yet</span><span class="pn">.</span> <span class="pn">|</span>
<span class="id">Odbc</span>                 <span class="pn">|</span>       <span class="pn">|</span>      <span class="pn">|</span>            <span class="pn">|</span> <span class="id">Not</span> <span class="id">supported</span><span class="pn">.</span> <span class="pn">|</span>
<span class="id">Access</span>               <span class="pn">|</span>       <span class="pn">|</span>      <span class="pn">|</span>            <span class="pn">|</span> <span class="id">Not</span> <span class="id">supported</span><span class="pn">.</span> <span class="pn">|</span>

<span class="pn">.</span><span class="id">NET</span> <span class="n">4.5</span><span class="pn">.</span><span class="n">1</span> <span class="o">/</span> <span class="id">Mono</span><span class="pn">:</span> <span class="id">All</span> <span class="id">should</span> <span class="id">work</span><span class="pn">.</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Example-projects" class="anchor" href="#Example-projects">Example projects</a></h2>
<p>There are some example .NET-Coreapp 2.0 projects at: <a href="https://github.com/fsprojects/SQLProvider/tree/master/tests/SqlProvider.Core.Tests">tests\SqlProvider.Core.Tests</a></p>
<p>There is a build.cmd which runs as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">dotnet</span> <span class="id">restore</span>
<span class="id">dotnet</span> <span class="id">build</span>
<span class="id">dotnet</span> <span class="id">run</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Limitations" class="anchor" href="#Limitations">Limitations</a></h2>
<p>You need your database connection driver to also support .NET Core.
If your database connection driver has external dependencies, they have to be also present
(e.g. a project prebuild-task to move them to resolution path).</p>
<p>Connection string can be passed as hard-coded static parameter (development) or <code>GetDataContext(connectionstring)</code> parameter on runtime, but fetching it automatically from the application configuration is not supported.</p>
<p>The target frameworks are defined in the project file: <code>&lt;TargetFrameworks&gt;net461;netcoreapp2.0;netstandard2.0&lt;/TargetFrameworks&gt;</code>
Corresponding files goes to root bin paths, e.g.: \bin\netstandard2.0</p>
<h4><a name="Microsoft-Sql-Server" class="anchor" href="#Microsoft-Sql-Server">Microsoft Sql Server</a></h4>
<p>If you plan to run Microsoft SQL Server, you need a dependency to System.Data.SqlClient and a post-build task to
copy correct dll from under <code>System.Data.SqlClient\runtimes\...\</code> to your execution folder.</p>
<h4><a name="MySql" class="anchor" href="#MySql">MySql</a></h4>
<p>MySQL is using MySQLConnector.
Alternative is to use provided custom build of MySQL.Data.dll (6.10-rc) compiled from sources to .Net Standard 2.0.
As the official MySQL.Data.dll does not support .NET Standard 2.0. See: <a href="https://bugs.mysql.com/bug.php?id=88016">https://bugs.mysql.com/bug.php?id=88016</a></p>
<h4><a name="SQLite" class="anchor" href="#SQLite">SQLite</a></h4>
<p>SQLite is using Microsoft.Data.Sqlite library which has dependency to non-managed e_sqlite3.dll.
Ensure that the correct platform specific file is found either from referencePath or PATH environment variable.</p>
<p>Due to lack of Mono-support in Microsoft.Data.SQLite and Core-support in System.Data.SQLite, there is no
common driver that could work on both environments. That's why build is not possible with Mac/Ubuntu.
Microsoft.Data.Sqlite.Core.Backport could maybe work, not tested.</p>
<h4><a name="Non-Windows-environment-Mac-Ubuntu-Linux" class="anchor" href="#Non-Windows-environment-Mac-Ubuntu-Linux">Non-Windows environment (Mac / Ubuntu / Linux / ...)</a></h4>
<p>On Windows you can reference .NET Standard 2.0 dlls in FSharp interactive but in Osx or Linux you cannot as Mono is not .NET Standard 2.0 compatible.</p>
<p>Non-Windows typeprovider will call Mono on compile-time. Mono will use .Net 4.5.1 libraries.
Typeprovider handles that on compilation, and after compile your assembly will ve .NET Core compatible.
But your compilation resolutionPath reference assemblies have to be .Net 4.5.1 version and your build folder
have to have core references, e.g. via PackageReferences.</p>
<p>On Ubuntu you probably have to use sudo for both dotnet restore and dotnet build.
If you forgot the sudo, try to remove bin and obj folders and then run restore again.</p>
<h2><a name="Some-Technical-Details" class="anchor" href="#Some-Technical-Details">Some Technical Details</a></h2>
<p>.NET Standard solution is located at <code>/src/SQLProvider.Standard/SQLProvider.Standard.fsproj</code></p>
<p>The following files is needed to the NuGet package, from the .NET Standard SDK:
netstandard.dll, System.Console.dll, System.IO.dll, System.Reflection.dll, System.Runtime.dll</p>
<p>You can find net461 versions of them by default from (e.g. 2.0.0, can be also something else like 2.0.2):
Win: <code>C:\Program Files\dotnet\sdk\2.0.0\Microsoft\Microsoft.NET.Build.Extensions\net461\lib\</code>
Others: <code>/usr/local/share/dotnet/sdk/2.0.0/Microsoft/Microsoft.NET.Build.Extensions/net461/lib</code></p>
<p>and also System.Data.SqlClient.dll from that NuGet package.</p>
<p>The NuGet cache is located at:
Win: <code>C:\Users\(your-user-name)\.nuget\packages\SQLProvider\</code>
Others: <code>~/.nuget/packages/SQLProvider/</code></p>

<div class="tip" id="fs1">namespace Microsoft.FSharp.Core</div>
<div class="tip" id="fs2">namespace Microsoft</div>

        </div>
        <div class="span3">
          <ul class="nav nav-list" id="menu">
            <li class="nav-header">SQLProvider</li>
            <li><a href="../index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/SQLProvider">Get Library via NuGet</a></li>
            <li><a href="http://github.com/fsprojects/SQLProvider">Source Code on GitHub</a></li>
            <li><a href="http://github.com/fsprojects/SQLProvider/blob/master/LICENSE.txt">License</a></li>
            <li><a href="http://github.com/fsprojects/SQLProvider/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
            
        
            <li class="nav-header">Documentation</li>
              <li><a href="../core/general.html">General</a></li>
              <li><a href="../core/parameters.html">Static Parameters</a></li>
              <li><a href="../core/querying.html">Querying</a></li>
              <li><a href="../core/constraints-relationships.html">Constraints & Relationships</a></li>
              <li><a href="../core/crud.html">CRUD</a></li>
              <li><a href="../core/programmability.html">Programmability</a></li>
              <li><a href="../core/individuals.html">Individuals</a></li>
              <li><a href="../core/composable.html">Composable Query</a></li>
              <li><a href="../core/mssql.html">SQL Server</a></li>
              <li><a href="../core/oracle.html">Oracle</a></li>
              <li><a href="../core/sqlite.html">SQLite</a></li>
              <li><a href="../core/postgresql.html">PostgreSQL</a></li>
              <li><a href="../core/mysql.html">MySQL</a></li>
              <li><a href="../core/odbc.html">ODBC</a></li>
              <li><a href="../reference/index.html">Internal API Docs</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsprojects/SQLProvider"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
  </html>
